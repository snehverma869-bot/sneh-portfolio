<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard â€“ LearnHub</title>
<!-- Bootstrap 5 CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { font-family: 'Inter', sans-serif; background: #f0f2f8; }
  .card-img-top { height: 160px; object-fit: cover; border-radius: 12px 12px 0 0; }
  .card:hover { transform: translateY(-5px); transition: 0.3s; }
  .btn-action { border-radius: 12px; }
  #dashboard, #registerForm { display: none; }
</style>
</head>
<body>

<div class="container py-5">

  <!-- Login Form -->
  <div id="loginForm" class="w-50 mx-auto">
    <h2 class="text-center mb-4">Admin Login</h2>
    <form id="adminLogin">
      <div class="mb-3">
        <label for="username" class="form-label">Username</label>
        <input type="text" id="username" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input type="password" id="password" class="form-control" required>
      </div>
      <button type="submit" class="btn btn-primary w-100">Login</button>
      <p class="text-center mt-2">
        Don't have an account? <a href="#" id="showRegister">Register</a>
      </p>
    </form>
  </div>

  <!-- Register Form -->
  <div id="registerForm" class="w-50 mx-auto">
    <h2 class="text-center mb-4">Register Admin</h2>
    <form id="adminRegister">
      <div class="mb-3">
        <label for="regUsername" class="form-label">Username</label>
        <input type="text" id="regUsername" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="regPassword" class="form-label">Password</label>
        <input type="password" id="regPassword" class="form-control" required>
      </div>
      <button type="submit" class="btn btn-success w-100">Register</button>
      <p class="text-center mt-2">
        Already have an account? <a href="#" id="showLogin">Login</a>
      </p>
    </form>
  </div>

  <!-- Dashboard -->
  <div id="dashboard">
    <h2 class="text-center mb-4">Admin Dashboard</h2>
    <div class="text-center mb-3">
      <button class="btn btn-success mb-3" id="addCourseBtn">Add Course</button>
      <button class="btn btn-secondary mb-3" id="logoutBtn">Logout</button>
    </div>
    <div class="row" id="coursesRow"></div>
  </div>

</div>

<!-- Add/Edit Course Modal -->
<div class="modal fade" id="courseModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="courseForm">
        <div class="modal-header">
          <h5 class="modal-title" id="courseModalLabel">Add Course</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="courseTitle" class="form-label">Course Title</label>
            <input type="text" id="courseTitle" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="courseDesc" class="form-label">Description</label>
            <textarea id="courseDesc" class="form-control" rows="3" required></textarea>
          </div>
          <div class="mb-3">
            <label for="courseInst" class="form-label">Instructor</label>
            <input type="text" id="courseInst" class="form-control" required>
          </div>
          <div class="mb-3">
            <label for="courseImg" class="form-label">Image URL</label>
            <input type="text" id="courseImg" class="form-control" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
const defaultAdmin = { username: "admin", password: "admin123" };
let courses = [
  {title:'HTML & CSS', desc:'Learn HTML5 and CSS3 basics', img:'css.png', inst:'Sneh'},
  {title:'JavaScript Advanced', desc:'JS ES6+, DOM, Async', img:'js.jpg', inst:'Sneh'},
  {title:'React Basics', desc:'React components, hooks', img:'react.jpg', inst:'Sneh'},
  {title:'Python Web', desc:'Flask, APIs', img:'python.jpg', inst:'Sneh'}
];
let editingIndex = null;

// Elements
const loginForm = document.getElementById('loginForm');
const registerForm = document.getElementById('registerForm');
const dashboard = document.getElementById('dashboard');
const coursesRow = document.getElementById('coursesRow');

// Show Register
document.getElementById('showRegister').addEventListener('click', () => {
  loginForm.style.display = 'none';
  registerForm.style.display = 'block';
});

// Show Login
document.getElementById('showLogin').addEventListener('click', () => {
  loginForm.style.display = 'block';
  registerForm.style.display = 'none';
});

// Register
document.getElementById('adminRegister').addEventListener('submit', e => {
  e.preventDefault();
  const username = document.getElementById('regUsername').value;
  const password = document.getElementById('regPassword').value;
  localStorage.setItem('admin_user', JSON.stringify({ username, password }));
  alert('Registration successful! Logging in...');
  loginForm.style.display = 'none';
  registerForm.style.display = 'none';
  dashboard.style.display = 'block';
  renderCourses();
});

// Login
document.getElementById('adminLogin').addEventListener('submit', e => {
  e.preventDefault();
  const user = document.getElementById('username').value;
  const pass = document.getElementById('password').value;
  const storedAdmin = JSON.parse(localStorage.getItem('admin_user'));

  if ((storedAdmin && user === storedAdmin.username && pass === storedAdmin.password) ||
      (user === defaultAdmin.username && pass === defaultAdmin.password)) {
    loginForm.style.display = 'none';
    dashboard.style.display = 'block';
    renderCourses();
  } else {
    alert('Invalid credentials!');
  }
});

// Logout
document.getElementById('logoutBtn').addEventListener('click', () => {
  dashboard.style.display = 'none';
  loginForm.style.display = 'block';
});

// Render Courses
function renderCourses() {
  coursesRow.innerHTML = '';
  courses.forEach((c, index) => {
    const col = document.createElement('div');
    col.className = 'col-sm-6 col-md-4 col-lg-3 mb-4';
    col.innerHTML = `
      <div class="card shadow-sm h-100">
       <img src="${c.img}" class="card-img-top" alt="${c.title}">

        <div class="card-body d-flex flex-column">
          <h5 class="card-title">${c.title}</h5>
          <p class="card-text">${c.desc}</p>
          <p class="text-muted mb-3"><strong>${c.inst}</strong></p>
          <div class="d-flex gap-2 mt-auto">
            <button class="btn btn-warning btn-action btn-edit">Edit</button>
            <button class="btn btn-danger btn-action btn-delete">Delete</button>
          </div>
        </div>
      </div>
    `;
    coursesRow.appendChild(col);

    col.querySelector('.btn-edit').addEventListener('click', () => {
      editingIndex = index;
      document.getElementById('courseModalLabel').innerText = 'Edit Course';
      document.getElementById('courseTitle').value = c.title;
      document.getElementById('courseDesc').value = c.desc;
      document.getElementById('courseInst').value = c.inst;
      document.getElementById('courseImg').value = c.img;
      new bootstrap.Modal(document.getElementById('courseModal')).show();
    });

    col.querySelector('.btn-delete').addEventListener('click', () => {
      if(confirm(`Delete "${c.title}"?`)){
        courses.splice(index,1);
        renderCourses();
        alert(`Course "${c.title}" deleted`);
      }
    });
  });
}

// Add Course
document.getElementById('addCourseBtn').addEventListener('click', () => {
  editingIndex = null;
  document.getElementById('courseModalLabel').innerText = 'Add Course';
  document.getElementById('courseForm').reset();
  new bootstrap.Modal(document.getElementById('courseModal')).show();
});

// Save Course
document.getElementById('courseForm').addEventListener('submit', e => {
  e.preventDefault();
  const newCourse = {
    title: document.getElementById('courseTitle').value,
    desc: document.getElementById('courseDesc').value,
    inst: document.getElementById('courseInst').value,
    img: document.getElementById('courseImg').value
  };
  if(editingIndex !== null){
    courses[editingIndex] = newCourse;
    alert('Course updated');
  } else {
    courses.push(newCourse);
    alert('Course added');
  }
  renderCourses();
  bootstrap.Modal.getInstance(document.getElementById('courseModal')).hide();
});
</script>

</body>
</html>
